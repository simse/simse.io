---
import { getAllArticles } from "src/lib/cms";
import { prettyDate } from "src/utils/date";

// load props
export interface Props {
    limit?: number;
}

const { limit = 3 } = Astro.props as Props;

// load articles
let articles = await getAllArticles();

articles = articles.slice(0, limit);
---

<div>
    {
        articles.map((article) => (
            <a href={`/article/${article.slug}`} class="mb-3 block">
                <h3>{article.name}</h3>

                <p class="font-serif text-xl italic">
                    {prettyDate(article.createdAt)}
                </p>
            </a>
        ))
    }
    {articles.length === 0 && <p>I haven't published any articles yet :(</p>}
</div>

---
import { getAllArticleSlugs, getArticleBySlug } from "src/lib/cms";

import Article from "@layouts/Article.astro";
import SlateToHtml from "@components/SlateToHtml.astro";

const { slug } = Astro.params;

const article = await getArticleBySlug(slug);

// redirect to 404 if no article found
if (!article.content) {
  Astro.redirect("/404", 302);
}
---

<Article article={article}>
  <SlateToHtml children={article.content} />
</Article>
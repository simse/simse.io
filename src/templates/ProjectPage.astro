---
import BaseLayout from "@layouts/BaseLayout.astro";
import Navbar from "@components/Navbar.astro";
import Text from "@components/text/Text.astro";
import type { Project } from "src/cms";

interface Props {
  project: Project;
}

const { project } = Astro.props;

/*const getDomainFromUrl = (url) => {
  const domain = (new URL(url));
  return domain.hostname;
};*/

// assuming project.sourceCode contains the URL
// const domainName = getDomainFromUrl(project.sourceCode);
---
<BaseLayout title={project.title} canonical={`/${project.slug}`}>
  <Navbar />

  <main class="max-w-2xl mx-auto pt-8 px-2 pb-12">
    <header class="mb-8">
      <h1 class="text-2xl md:text-3xl mb-2">{project.title}</h1>
      <span class="text-lg text-black/70 dark:text-white/70">{project.description}</span>
    </header>

    <section class="mb-8">
      <h2 class="font-semibold text-lg mb-2">Key Information</h2>

      <table class="col-span-3 w-96 bg-zinc-900 rounded-lg overflow-clip">
          <tr class="border-b border-black/20 dark:border-white/20">
            <td class="py-3 px-3 font-bold w-32">Language{project.languages.length > 1 && "s"}</td>
            <td class="py-3 px-3">{project.languages.join(", ")}</td>
          </tr>
          <tr>
            <td class="py-3 px-3 font-bold">Source Code</td>
            <td class="py-3 px-3">
              <a
                href={project.sourceCode}
                class="text-purple-400 hover:text-purple-500 hover:border-purple-500 border-purple-400 border-b transition-colors"
              >
                github.com
              </a>
            </td>
          </tr>
      </table>
    </section>

    <section class="mb-8">
      <h2 class="font-semibold text-lg mb-4">Additional Information</h2>

      <Text content={project.details} />
    </section>
  </main>
</BaseLayout>

---
import { getImage } from "astro:assets";
import type { ImageMetadata } from "astro";

interface Props {
    image: ImageMetadata;
    alt: string;
    class?: string;
}

const props = Astro.props;

const image = await getImage({
    src: props.image,
    format: 'avif',
    quality: 'high',
    width: 2000
});
---
<style lang="scss">
    picture {
        width: min(100vw, 1400px);
        height: auto;
        display: block;
    }

    img {
        width: 100%;
        height: 100%;
    }
</style>

<picture class="bg-zinc-800" style={`aspect-ratio:${image.attributes.width / image.attributes.height}`}>
    <img src={image.src} alt={props.alt} class={props.class} loading="lazy" decoding="async" />
</picture>